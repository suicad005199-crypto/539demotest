<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>539 Pro Analysis</title>
    <style>
        :root {
            --primary: #1a237e;
            --accent: #d32f2f;
            --bg: #f5f7fa;
            --card: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 10px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--card);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            padding: 20px;
            box-sizing: border-box;
        }

        h2 {
            text-align: center;
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        /* 上傳區優化 */
        .upload-area {
            border: 2px dashed #cbd5e0;
            background: #f8fafc;
            padding: 30px 15px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        input[type="file"] {
            width: 100%;
            max-width: 250px;
            margin-bottom: 15px;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            max-width: 200px;
            transition: 0.3s;
            -webkit-appearance: none; /* iOS 修正 */
        }

        .btn:active { transform: scale(0.95); opacity: 0.9; }

        /* 表格響應式 */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 500px; /* 確保手機上可滾動而不擠壓 */
        }

        th {
            background: #edf2f7;
            color: #4a5568;
            padding: 12px;
            font-size: 0.9rem;
            text-align: center;
        }

        td {
            padding: 16px 8px;
            border-bottom: 1px solid #edf2f7;
            text-align: center;
        }

        /* 號碼球 UI */
        .ball-group {
            display: flex;
            justify-content: center;
            gap: 6px;
        }

        .ball {
            width: 32px;
            height: 32px;
            line-height: 32px;
            background: linear-gradient(135deg, #ff5252, #d32f2f);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.85rem;
            box-shadow: 0 4px 6px rgba(211, 47, 47, 0.2);
        }

        /* 期望值標籤 */
        .ev-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            background: #f1f5f9;
            font-size: 0.8rem;
            color: #64748b;
            transition: 0.3s;
        }

        .ev-high {
            background: #fef3c7;
            color: #92400e;
            font-weight: bold;
        }

        @media (hover: hover) {
            .ev-high:hover {
                background: #f59e0b !important;
                color: white;
                transform: scale(1.1);
            }
        }

        /* 手機版微調 */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            h2 { font-size: 1.25rem; }
            .ball { width: 28px; height: 28px; line-height: 28px; font-size: 0.75rem; }
            td { font-size: 0.85rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>539 數據分析系統</h2>
    
    <div class="upload-area">
        <input type="file" id="csvFile" accept=".csv"><br>
        <button class="btn" onclick="process()">執行分析</button>
    </div>

    <div id="resultSection" style="display:none;">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>策略</th>
                        <th>推薦組合</th>
                        <th>期望值</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
function process() {
    // 原始邏輯 B 組：10, 20, 15, 23, 35 各自 +10 並修正
    const base = [10, 20, 15, 23, 35];
    const bNums = base.map(n => {
        let r = n + 10;
        if (r > 39) r -= 39;
        return r.toString().padStart(2, '0');
    }).sort((a,b) => a-b);

    const data = [
        { name: "A. 版路走勢", nums: ["04","14","24","31","32"], ev: "中", cls: "" },
        { name: "B. 週期+10", nums: bNums, ev: "高", cls: "" },
        { name: "C. 尾數平衡", nums: ["07","17","27","05","15"], ev: "中", cls: "" },
        { name: "D. 冷門避險", nums: ["01","10","20","30","39"], ev: "最高", cls: "ev-high" }
    ];

    let html = "";
    data.forEach(d => {
        html += `<tr>
            <td><strong>${d.name}</strong></td>
            <td><div class="ball-group">${d.nums.map(n => `<div class="ball">${n}</div>`).join('')}</div></td>
            <td><span class="ev-tag ${d.cls}">${d.ev}</span></td>
        </tr>`;
    });

    document.getElementById('tableBody').innerHTML = html;
    document.getElementById('resultSection').style.display = 'block';
}
</script>

</body>
</html>
